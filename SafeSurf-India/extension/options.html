<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SafeSurf India - Settings</title>
    <link rel="stylesheet" href="styles/popup.css">
    <style>
        body { background: #f5faff; color: #223; font-family: Arial, sans-serif; margin: 0; padding: 24px; }
        h2 { color: #355c7d; font-weight: bold; margin-bottom: 1.2em; }
        section { margin-bottom: 1.5em; }
        label { font-size: 1.09em; }
        input[type="text"] { width: 90%; max-width: 370px; font-size: 1em; margin-top: 8px; padding: 6px; border-radius: 6px; border: 1.3px solid #d0e0fb;}
        #saveBtn { background: #355c7d; color: #fff; border: none; border-radius: 6px; padding: 9px 36px; cursor: pointer; font-size: 1em; margin-top: 1em;}
        #saveBtn:active { background: #2d4669; }
        #saveStatus { color: #14ad40; margin-top: 14px; font-weight: bold;}
        .suboption { margin-left: 28px; font-size: 0.98em;}
        .switch { position: relative; display: inline-block; width: 46px; height: 24px;}
        .switch input { opacity: 0; width: 0; height: 0;}
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .3s; border-radius: 24px;}
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 4px; bottom: 3px; background-color: white; transition: .3s; border-radius: 50%;}
        input:checked + .slider { background-color: #355c7d;}
        input:checked + .slider:before { transform: translateX(22px);}
    </style>
</head>
<body>
    <h2>SafeSurf India Settings</h2>

    <section>
        <label class="switch">
            <input type="checkbox" id="enableNotifications">
            <span class="slider"></span>
        </label>
        <span style="vertical-align: middle;">Enable browser notifications for threats</span>
    </section>

    <section>
        <label class="switch">
            <input type="checkbox" id="enableSound">
            <span class="slider"></span>
        </label>
        <span style="vertical-align: middle;">Enable sound alert for threats</span>
    </section>

    <section>
        <label>
            Custom Safe Domains (comma separated):<br>
            <input type="text" id="customWhitelist" placeholder="example.com, trusted.in">
        </label>
        <div class="suboption">These domains will always be marked "Trusted" in extension/popup.</div>
    </section>

    <section>
        <label>
            UI Theme Mode:
            <select id="themeMode">
                <option value="auto">Auto</option>
                <option value="light">Light</option>
                <option value="dark">Dark</option>
            </select>
        </label>
        <div class="suboption">Controls popup and overlay appearance.</div>
    </section>

    <button id="saveBtn">Save Settings</button>
    <div id="saveStatus"></div>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        // Load settings
        chrome.storage.sync.get(["enableNotifications", "enableSound", "customWhitelist", "themeMode"], result => {
            document.getElementById("enableNotifications").checked = result.enableNotifications ?? true;
            document.getElementById("enableSound").checked = result.enableSound ?? true;
            document.getElementById("customWhitelist").value = result.customWhitelist ?? "";
            document.getElementById("themeMode").value = result.themeMode || "auto";
        });

        document.getElementById("saveBtn").onclick = () => {
            const enableNotifications = document.getElementById("enableNotifications").checked;
            const enableSound = document.getElementById("enableSound").checked;
            const customWhitelist = document.getElementById("customWhitelist").value;
            const themeMode = document.getElementById("themeMode").value;
            chrome.storage.sync.set(
                { enableNotifications, enableSound, customWhitelist, themeMode },
                () => {
                    const status = document.getElementById("saveStatus");
                    status.innerText = "Settings saved!";
                    setTimeout(()=>{ status.innerText = ""; }, 1500);
                }
            );
        };
    });
    </script>
</body>
</html>
